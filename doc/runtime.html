<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
	<title>Seed Tutorial : Standalone</title>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<style type="text/css">
body
{
	font-size: 10pt;
	font-family: "sans-serif";
	text-align: justify;
}

#header
{
	text-align: right;
	font-size: 18pt;
	width: 100%;
	border-bottom: 1px solid #aaa;
	
}

#subheader
{
	text-align: right;
	font-size: 12pt;
	width: 100%;
}

div.section
{
	font-size: 14pt;
	width: 100%;
	border-bottom: 1px solid #ccc;
	margin-bottom: 10px;
}

p
{
	margin-left: 10px;
	text-indent: 0em;
}

pre
{
	margin-left: 20px;
	padding-left: 5px;
	border-left: 2px solid #ddd;
}

div.filename
{
    margin-left: 25px;
    font-weight: bold;
    width: 70%;
    border-bottom: 1px solid #ccc;
}

code
{
    font-weight: bold;
}

span.changed
{
    color: red;
}
	</style>
</head>
<body>
<div id="header">Seed Runtime</div>
<div id="subheader">v.0.1</div>
<div class="section"><b>Seed.import_namespace</b>(namespace, <i>version</i>)</div>
<p>
Imports functions and constructors from the given gobject-introspection <i>namespace</i>. The optional <i>version</i> parameter forces a particular version, and will throw an exception if the typelib for that version is not installed; if it is omitted, the latest version is loaded.
</p>
<pre>
Seed.import_namespace("Gtk", "2.0");
</pre>
<div class="section"><b>Seed.include</b>(file)</div>
<p>
Evaluates a Javascript <i>file</i> as if it were included in the file at the point include is called.
</p>
<pre>
Seed.include("tabview.js");
</pre>
<div class="section"><b>Seed.print</b>(value)</div>
<p>
Prints, to standard output, a representation of <i>value</i>. Number types are printed as floating-point values (with 6 decimal places); strings are printed as-is; objects are printed as <code>[object <i>type</i>]</code>.
</p>
<pre>
Seed.print(5);
Seed.print("This is a test!".replace(" is ", " was "));

var win = new Gtk.Window();
Seed.print(win);
</pre>
<div class="section"><b>Seed.printf</b>(format, ...)</div>
<div class="section"><b>Seed.sprintf</b>(format, ...)</div>
<p>
<code>printf</code> prints, to standard output, a string formatted as specified by <i>format</i>. Following <i>format</i> should be values to substitute, as in C's <code>printf</code>. Most standard printf format strings should work.
</p>
<p>
<code>sprintf</code> returns the string, instead of printing it.
</p>
<pre>
Seed.printf("A number: %d\n", 5);
Seed.printf("One third is approximately %.3f\n", 1/3);
Seed.printf("%d %s %d\n", 2, " is not ", 5);

var my_string = Seed.sprintf("%d + %d = %d", 2, 3, 2+3);
var my_name = Seed.printf("[%s] is %d characters long!\n", my_string, my_string.length);
</pre>
<div class="section"><b>Seed.readline</b>(prompt)</div>
<p><i>Returns: user input</i></p>
<p>
Uses the GNU Readline library to display a prompt (using the <i>prompt</i> argument) and then wait for input from the user. The readline prompt provides history (using the up and down arrow keys) within a single Seed process.
</p>
<pre>
var input = Seed.readline("prompt> ");
Seed.print(input);
</pre>
<div class="section"><b>Seed.check_syntax</b>(code)</div>
<p>
Examines a segment of Javascript, looking for syntax errors. If errors are found, an exception is thrown, which can be caught with a try/catch block.
</p>
<pre>
try
{ Seed.check_syntax("234[asdf"); }
catch(e)
{ Seed.print("Something horrible happened!"); }
</pre>
<div class="section"><b>Seed.fork</b>()</div>
<p><i>Returns: pid of child (to parent); 0 (to child)</i></p>
<p>
Creates a new process which is an exact copy of the current one, starting from the next instruction in both processes. It works just as <a href="http://www.opengroup.org/onlinepubs/000095399/functions/fork.html">POSIX fork</a> should.
</p>
<pre>
var pid = Seed.fork();

if(pid)
{
    // Parent
    
    while(1)
        Seed.print("From Parent");
}
else
{
    // Child
    while(1)
        Seed.print("From Child");
}
</pre>
<div class="section"><b>Seed.setTimeout</b>(code, timeout)</div>
<p>
Evaluates a given segment of Javascript after <i>timeout</i> milliseconds. Keep in mind that this is evaluated in the global context, so local variables surrounding the call to setTimeout will not be available! Also, setTimeout will <b>only</b> work while a GLib main loop is running (after you've called Gtk.main(), etc.).
</p>
<div class="section"><b>Seed.prototype</b>(constructor)</div>
<p>
Returns the prototype for an object created with <i>constructor</i>. This can be used to add methods to all future objects of a particular class.
</p>
<pre>
Seed.prototype(Gio.FileInputStream).get_contents = function()
{
	var stream = Gio.DataInputStream._new(this);
	var line = stream.read_until("", 0);
	return line;	
}
</pre>
<div class="section"><b>Seed.introspect</b>(function)</div>
<p>
Returns an object containing information about the function, its arguments, etc. This will eventually support introspection of a wider variety of Javascript types.
</p>
<pre>
proto = Seed.prototype(Gtk.Window);
method = Seed.introspect(proto.translate_coordinates);

for(i in method.args)
{
    Seed.print(method.args[i].type)
}
</pre>
<div class="section"><b>Seed.stringify</b>(object)</div>
<p>
Returns a string representing the entire contents of <i>object</i> in a pretty-printed fashion, like that of JSON.
</p>
<pre>
proto = Seed.prototype(Gtk.Window);
method = Seed.introspect(proto.translate_coordinates);
Seed.print(Seed.stringify(method);
</pre>
<div class="section"><b>Seed.argv</b></div>
<p>
An array representing the arguments passed to the <code>seed</code> interpreter.
</p>
<div class="section"><b><i>object</i>.signal.<i>signame</i>.connect</b>(function<i>, context</i>)</div>
<p>
Connects <i>function</i> to the signal, <i>signame</i>, on <i>object</i>. Any GObject signal will work. <i>context</i> is passed to the signal handler as the <code>this</code> object; if omitted, the global context is used.
</p>
<pre>
function button_clicked()
{
    Seed.print("You pushed me!!");
}

var button = new Gtk.Button();
button.signal.clicked.connect(button_clicked);
</pre>
<div class="section"><b>Exceptions</b></div>
<p>
Seed throws Javascript exceptions for errors in the GObject layer; our custom exception types are as follows:</p>
<ul>
<li><b>InvalidPropertyValue</b> - a property was set to a value out of range</li>
<li><b>PropertyError</b> - an error occurred in GLib while trying to set a property</li>
<li><b>NamespaceError</b> - Seed.import_namespace() was called with a nonexistant namespace or namespace version</li>
<li><b>ArgumentError</b> - a function was called with the wrong number/type of arguments</li>
<li><b>SyntaxError</b> - a syntax error was thrown from JavaScriptCore</li>
<li><b>ParseError</b> - a parsing error was thrown from JavaScriptCore (make sure you close all of your brackets!)</li>
</ul>
<p>Exceptions are caught with the <code>try/catch</code> construct:</p>
<pre>
try
{
    var window = new Gtk.Window();
    window.opacity = "hello!";
}
catch(e)
{
    Seed.print("An exception occurred!");
}
</pre>
<p>
<code>e</code> is the name we've given the Exception object in this examle. The Exception object has a handful of properties which provide more information about the exception:</p>
<ul>
<li><b>name</b> - the exception type</li>
<li><b>message</b> - the detailed message describing the exception</li>
<li><b>line</b> - the line on which the exception took place</li>
<li><b>sourceURL</b> - the source file, if any, in which the exception took place</li>
</ul>
</body>
</html>
